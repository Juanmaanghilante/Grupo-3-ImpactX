<!DOCTYPE html>
<html lang="en">

<%- include('../partials/head', {title:"Impact X | Edit product"})%>

  <body class="bodySignUp">

    <%- include('../partials/header')%>

      <form enctype="multipart/form-data"
        action="/productos/<%= locals.productoEditar ? productoEditar.id : locals.id ? id : null  %>/?_method=put"
        method="POST" class="create-form">
        <div class="content">
          <div>
            <h2 class="titulo-registrar-usuario">Editar Producto</h2>
            <div class="control-formulario">

              <div class="erroresForm">
                <% if (locals.errors && errors.category) { %>
                  <%= errors.category.msg %>
                    <% } %>
              </div>
              <select class="control <%= locals.errors && errors.category ? 'invalidError' : null %>" name="category" id="">
                <option value="">Seleccione una opción</option>
                <% let tipoServicio=['producto', 'servicio' ] %>
                <% for( const servicio of tipoServicio ) { %>
                  <option value="<%= servicio %>"
                    <% if (locals.productoEditar) { %>
                      <%= servicio === productoEditar.categoria ? 'selected' : null %>
                    <% } else if (locals.oldData) { %>
                      <%= servicio === oldData.category ? 'selected' : null %>
                    <% } %>
                  >
                    <%= servicio %>
                  </option>
                <% } %>
              </select>

              <div class="erroresForm">
                <% if (locals.errors && errors.product) { %>
                  <%= errors.product.msg %>
                    <% } %>
              </div>
              <input class="control <%= locals.errors && errors.product ? 'invalidError' : null %>"
                value="<%= locals.productoEditar ? productoEditar.nombre : locals.oldData ? oldData.product : null %>"
                type="text" name="product" placeholder="Nombre" />

              <div class="erroresForm">
                <% if (locals.errors && errors.desc) { %>
                  <%= errors.desc.msg %>
                    <% } %>
              </div>
              <textarea type="text" name="desc" class="control <%= locals.errors && errors.desc ? 'invalidError' : null %>"
                placeholder="Descripción"><%= locals.productoEditar ? productoEditar.descripcion : locals.oldData ? oldData.desc : null %></textarea>


              <div class="erroresForm">
                <% if (locals.errors && errors.price) { %>
                  <%= errors.price.msg %>
                    <% } %>
              </div>
              <input class="control <%= locals.errors && errors.price ? 'invalidError' : null %>"
                value="<%= locals.productoEditar ? productoEditar.precio : locals.oldData ? oldData.price : null %>"
                type="number" name="price" placeholder="Precio" />

                <div class="erroresForm">
                  <% if (locals.errors && errors.image) { %>
                    <%= errors.image.msg %>
                      <% } %>
                </div>
                <input type="file" name="image"
                  class="control <%= locals.errors && errors.image ? 'invalidError' : null %>" />
          

            </div>
            <button type="submit" class="botonContactanos">Editar</input>
          </div>
        </div>
      </form>

      <%- include('../partials/footer')%>


        <script>
          const menu = document.querySelector('.svgMenu')
          const close = document.querySelector('.closeBtn')
          const nav = document.querySelector('#navPrincipal')

          menu.addEventListener('click', () => {
            nav.classList.add('open-nav')
          })
          close.addEventListener('click', () => {
            nav.classList.remove('open-nav')
          })
        </script>
  </body>

</html>